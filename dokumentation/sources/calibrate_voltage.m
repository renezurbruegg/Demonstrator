files = dir('*.csv');
VM1 = [] 
VM2 = [] 
%vm1, vm2

% 5V
% vm1, vm2, applied value
M5 =[-0.01808180299227136,0.05016670354235491,0.0;
0.024923896208924927,0.09352488346010945,0.1;
0.0674344439273371,0.13575085259134367,0.2;
0.10967109429240642,0.17887671567318478,0.3;
0.15197869856795174,0.22113625439647216,0.4;
0.19479289850539022,0.2642350329210885,0.5;
0.2371432277162758,0.30715032310732354,0.6;
0.2797590618824911,0.34997253397013833,0.7;
0.3223604000885016,0.3925879866637165,0.8;
0.3646485492595615,0.4355433314768332,0.9;
0.40705991409236225,0.4784986762899498,1.0;
0.4494243577908154,0.5211179437098976,1.1;
0.4921904921759963,0.5639058220353853,1.2;
0.5345225107003075,0.6066017654553639,1.3;
0.5769968185182076,0.6495956390048141,1.4;
0.619316248445499,0.6922931083153405,1.5;
0.6619591671689388,0.7351198968497988,1.6;
0.7047012687779903,0.7778551319513852,1.7;
0.7469558483569974,0.8207421931624848,1.8;
0.7893050331499721,0.863718900443271,1.9;
0.8320097504406011,0.906188249116891,2.0;
0.874247926696218,0.9490611958404223,2.1;
0.9168221803450042,0.9920710912406255,2.2;
0.9594048263918027,1.034826162919334,2.3;
1.0017494335131338,1.077343195672574,2.4;
1.0442794363360317,1.1205560345156442,2.5;
1.087075707059533,1.162909415507626,2.6;
1.1292398776235786,1.2060326082810078,2.7;
1.1717649213021952,1.248666371661161,2.8;
1.2145531811003196,1.2916404086334887,2.9;
1.2568703221917894,1.334359240411685,3.0;
1.2990234300493628,1.3767397059608912,3.1;
1.3419936522953202,1.420272981819014,3.2;
1.384195207177789,1.462921241159371,3.3;
1.4266439563290125,1.505675549892806,3.4;
%1.4694264940375825,0.9686204423556695,3.5;
1.511727231805663,1.5913390452502845,3.6;
1.5541122750265117,1.6343054527698726,3.7;
1.596733449809645,1.6769781263589962,3.8;
%0.4415488552006164,1.719647748167024,3.9;
1.6819681699231714,1.7625592236268885,4.0;
1.7240369723279747,1.8051731504299198,4.1;
1.7667058311907287,1.8478717641583569,4.2;
%1.8092217195260583,0.17962325762373074,4.3;
1.8518608235231289,1.9339483943816709,4.4;
1.8942691365748336,1.9765943648862074,4.5;
1.9367766325121494,2.0194360308535066,4.6;
1.9790926291857083,2.062170503009819,4.7;
2.0216726049240497,2.105281488658819,4.8;
2.06445628705053,2.147909911422054,4.9;
2.106787542629568,2.190460895239984,5.0];

% 50mV
% vm1, vm2, applied value
M50 = [0.14010765157815233,0.09337000556950054,0.0;
0.17813208108582368,0.1318537281320811,0.001;
0.2241441661389629,0.15905158272997086,0.002;
0.2529037697125985,0.20503276849951552,0.003;
0.28432719671018,0.28271013420207375,0.004;
0.33726949515911214,0.29960479434810133,0.005;
0.38137002082840593,0.3267107140404819,0.006;
0.4143407008415286,0.3615368769598156,0.007;
0.4596527836058318,0.3383498256670049,0.008;
0.48258730001296996,0.46052788183503596,0.009;
0.5204900397494489,0.47097107674466526,0.01;
0.5797411326685534,0.5324804876746192,0.011;
0.5734025833326976,0.5291017845289958,0.012;
0.6097302225511363,0.5604935492977089,0.012;
0.6426062973502912,0.608680791326838,0.013;
0.6855471462032027,0.6451991668637607,0.014;
0.717394770773092,0.6700788122467977,0.015;
0.7664933509319378,0.7146813559063406,0.016;
0.8028469302896905,0.7572044922217729,0.017;
0.840963294702871,0.7918753957778608,0.018;
0.8751409541393599,0.8243337580395359,0.019;
0.9330656666997277,0.8737707044273713,0.02;
%0.5822790701223003,0.9199185937392713,0.021;
0.987960342104661,0.9505874678609304,0.022;
1.0436568729925002,0.9981418467853299,0.023;
1.0659878996879557,1.0174523731412746,0.024;
1.1173657788526827,1.067474880026856,0.025;
1.168724584385562,1.1233911391535887,0.026;
1.2000095368159245,1.1628483798857108,0.027;
1.2335627255456965,1.184574009506298,0.028;
1.2755945251047145,1.2231374598500053,0.029;
1.3266912589359965,1.278069138100724,0.03;
1.3643464229310829,1.3151669705732008,0.031;
1.3884650304033692,1.3496013610943687,0.032;
1.4330485004310638,1.3846415301630415,0.033;
1.4852804968299624,1.4265577435130579,0.034;
1.5092030273668469,1.4537494945487561,0.035;
1.5513774976920902,1.5081677106301163,0.036;
1.5770212327669733,1.5298223863402274,0.037;
1.6279936065186047,1.5775118065781137,0.038;
1.666206102036301,1.6027275293543202,0.039;
1.7127736112488654,1.6695954864157596,0.04;
1.7358027328699706,1.6858069290689783,0.041;
1.7853655652280056,1.7397540264436833,0.042;
1.8223443782377493,1.7790579151757442,0.043;
1.8563061241617143,1.8078583363215355,0.044;
1.9116890845419658,1.8634064743535947,0.045;
%1.0379401240549015,-0.03683118309923628,0.046;
%1.0872988685521587,1.9344057800733947,0.047;
2.03786726278124,1.9792524662205984,0.048;
2.06693204446445,2.0082604084809,0.049;
2.093530605549664,2.037580395358241,0.05];

% 500mV
% vm1, vm2, applied value
M500 = [-0.015030021896529357,0.04951629269632489,0.0;
0.02600346377154366,0.09320215760923473,0.01;
0.06546833395640532,0.1331164025604444,0.02;
0.10486644642979766,0.17222841055611082,0.03;
0.14391360407717957,0.21132706700948337,0.04;
0.18245492900794225,0.24987144372134185,0.05;
0.22155282251604094,0.2889880293886519,0.06;
0.26119126275072285,0.3290849997329692,0.07;
0.3004001647961792,0.36768774175828356,0.08;
0.3401011665433238,0.4081226968589543,0.09;
%0.3087559414363207,0.44614293016761913,0.1;
0.36053093361613164,0.48647336176576045,0.11;
0.45560650334551517,0.5253389384379457,0.12;
0.4953158974906732,0.5634732320650641,0.13;
0.5347403315760161,0.602884314608113,0.14;
0.5745386088455874,0.6424312014099226,0.15;
0.6126919761045541,0.6817770521320504,0.16;
0.6513202767965451,0.7211679166253403,0.17;
0.6902377337473582,0.7596749090187761,0.18;
0.7284879950561144,0.7984813574322314,0.19;
0.7690629506145524,0.8384837225625803,0.2;
0.808940574192613,0.8774374194139054,0.21;
0.8472987922576316,0.9163296991706789,0.22;
0.8862707997955307,0.9552971290369343,0.23;
0.9236371890044324,0.9953231454707754,0.24;
0.9646145981948716,1.0344984779241784,0.25;
1.0042847006584217,1.0737630749746323,0.26;
1.0428214479175408,1.1131283808012449,0.27;
1.0821974349779893,1.1522285631451654,0.28;
1.1206151627743746,1.1904830206529287,0.29;
1.1590302202623006,1.229603421046608,0.3;
1.1344435458644548,1.2704274782369864,0.31;
1.2384505344431644,1.309038231187677,0.32;
%1.2774587818815757,0.11954513202767966,0.33;
1.3163018516681797,1.3873496044128755,0.34;
1.355296747564297,1.4265325663190176,0.35;
1.392844336275759,1.465142174851798,0.36;
1.4340811468593362,1.5042087876036652,0.37;
1.4734117386759846,1.545023307978118,0.38;
1.5122300127411858,1.5844256166505182,0.39;
1.550505832716619,1.6225637250040057,0.4;
1.589653317667524,1.661547176721014,0.41;
1.6298620594944726,1.7005569500499729,0.42;
1.667774717519512,1.7397147347620758,0.43;
1.7072586613362224,1.7785669598919671,0.44;
1.7469360117798747,1.8190862204454075,0.45;
1.7860400088501656,1.8582142502918269,0.46;
1.8238778982383597,1.897231271600888,0.47;
1.863638409716871,1.9361208810492025,0.48;
1.9030895468868019,1.9752470035324365,0.49;
1.9428111481563435,2.0135518154282788,0.5];

M5_1 = sortrows([M5(:,3),M5(:,2),M5(:,1)])
M50_1 = sortrows([M50(:,3)*1000,M50(:,1),M50(:,2)])
M500_1 = sortrows([M500(:,3)*1000,M500(:,2),M500(:,1)])

figure
subplot(2,1,1);
%Messung , VM1, VM2

hold on
title({'Voltage Measurement 1 (VM1)','5V Range'})
plot(M5_1(:,2),M5_1(:,1));



p = polyfit(M5_1(:,2), M5_1(:,1),1)
poly = p(1)*M5_1(:,2) + p(2)

plot(M5_1(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
xlabel('Measured ADS Value []');
ylabel('Actual Voltage [V]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;


subplot(2,1,2);
hold on
plot(M5_1(:,3),M5_1(:,1))
title({'Voltage Measurement 2 (VM2)','5V Range'})


p = polyfit(M5_1(:,3), M5_1(:,1),1)
poly = p(1)*M5_1(:,3) + p(2)
%legend('fit')
plot(M5_1(:,3), poly, 'r')

s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
%legend('5V',  s)
xlabel('Measured ADS Value []');
 ylabel('Actual Voltage [V]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;












figure
subplot(2,1,1);
hold on
%Messung , VM1, VM2

 
plot(M50_1(:,2),M50_1(:,1))
%legend('500mV');

p = polyfit(M50_1(:,2), M50_1(:,1),1)
poly = p(1)*M50_1(:,2) + p(2)
%legend('fit')
plot(M50_1(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
%legend('50mV',  s)
title({'Voltage Measurement 1 (VM1)','50mV Range'})
xlabel('Measured ADS Value []');
ylabel('Actual Voltage [mV]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;


subplot(2,1,2);
hold on
plot(M50_1(:,3),M50_1(:,1))


p = polyfit(M50_1(:,3), M50_1(:,1),1)
poly = p(1)*M50_1(:,3) + p(2)
%legend('fit')
plot(M50_1(:,3), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
%legend('50mV',  s)
title({'Voltage Measurement 2 (VM2)','50mV Range'})
xlabel('Measured ADS Value []');
 ylabel('Actual Voltage [mV]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;








figure
subplot(2,1,1);
hold on 
%Messung , VM1, VM2

 
plot(M500_1(:,2),M500_1(:,1))
title({'Voltage Measurement 1 (VM1)','500mV Range'})


p = polyfit(M500_1(:,2), M500_1(:,1),1)
poly = p(1)*M500_1(:,2) + p(2)
%legend('fit')
plot(M500_1(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
xlabel('Measured ADS Value []');
 ylabel('Actual Voltage [mV]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;


subplot(2,1,2);
hold on
plot(M500_1(:,3),M500_1(:,1))

title({'Voltage Measurement 2 (VM2)','500mV Range'})


p = polyfit(M500_1(:,3), M500_1(:,1),1)
poly = p(1)*M500_1(:,3) + p(2)
%legend('fit')
plot(M500_1(:,3), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
%legend('500mV',  s)
xlabel('Measured ADS Value []');
 ylabel('Actual Voltage [mV]');
legend({'Measured Data','Fitted Data' },'Location','southeast');
grid on;

