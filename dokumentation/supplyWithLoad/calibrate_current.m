files = dir('*.csv');
VM1 = [] 
VM2 = [] 
%vm1, vm2


CM3_500 = [
% 500mA range 
% [measured Value from ADS] <=> [applied Current]
%V - mA

0.05102234666707357,0.012;
0.0855872008300845,0.021;
0.12782842886679738,0.031;
0.16629078896170782,0.04;
0.20909545208322203,0.05;
0.24386820883338042,0.059;
0.2807341059425808,0.068;
0.3230996940589451,0.078;
0.35979774320787944,0.087;
0.40454829825056643,0.098;
0.44236482517109066,0.107;
0.485390360949409,0.117;
0.5217263925658613,0.126;
0.5590969779737699,0.135;
0.6029056770757834,0.146;
0.6384104798162827,0.155;
0.6802610798727408,0.164;
0.7169862135789,0.173;
0.763352305239145,0.185;
0.7976589024269289,0.194;
0.8344927558346238,0.202;
0.8797300699620818,0.213;
0.9190526508533547,0.223;
0.9620598759450983,0.233;
1.0026542866080215,0.243;
1.0440021057289561,0.253;
1.0774481006477403,0.262;
1.1147599392695564,0.27;
1.159480357973923,0.281;
1.1976203736905955,0.29;
1.2400569157174355,0.301;
1.278929358897086,0.31;
1.3196641514904135,0.32;
1.3548492801611338,0.329;
1.3924476047333123,0.338;
1.4342211473171034,0.348;
1.473062691213159,0.357;
1.5204362521076362,0.369;
1.5593388316256078,0.378;
1.6013931380702062,0.389;
1.6391757139260401,0.397;
1.6731004570042196,0.406;
1.7150796133393356,0.416;
1.7507534084580114,0.425;
1.790842367876953,0.435;
1.8248800268556737,0.443;
1.8700189210427935,0.454;
1.9074169724805645,0.463;
1.9454417834608726,0.472;
1.9707948363863863,0.478;
1.9785761152352543,0.48;
2.009341120461429,0.488;
2.045239221490642,0.497
]
CM4_500 = [0.01480419009544445,0.001;
0.05791097954543723,0.012;
0.09564816015747195,0.021;
0.13985130196611,0.032;
0.17894843252893478,0.041;
0.1987071892333162,0.045;
0.22232034546162008,0.052;
0.26064919013359167,0.061;
0.2999469753034614,0.07;
0.3427894042160356,0.081;
0.38118958427112015,0.09;
0.4266054275926789,0.101;
0.464277757856429,0.11;
0.5100704961433117,0.121;
0.5480048981086586,0.13;
0.5861792463626583,0.139;
0.6311007011467069,0.15;
0.6691453487041372,0.159;
0.7134106705526012,0.17;
0.7515747190454029,0.179;
0.7962905600781258,0.19;
0.834480930182878,0.199;
0.8723783293024393,0.208;
0.9176644719274287,0.219;
0.955559963683805,0.228;
1.0010189134133407,0.239;
1.0394805105629772,0.249;
1.0828150391772398,0.259;
1.1215882994712791,0.269;
1.1602822134568287,0.278;
1.2052078644398838,0.289;
1.2436793798780814,0.298;
1.2878409411692897,0.309;
1.3260656438113692,0.318;
1.3706098221574563,0.329;
1.4098583973571572,0.338;
1.448432910407337,0.347;
1.4917796461459816,0.358;
1.5308119263605213,0.367;
1.5752050415423704,0.378;
1.6133355204431183,0.387;
1.6581020973365588,0.398;
1.697472362307452,0.407;
1.7340559696652957,0.417;
1.7795439113152403,0.427;
1.8181111763853182,0.437;
1.8621003120446167,0.447;
1.9002590199205016,0.457;
1.9446013992416322,0.468;
1.9841326456653263,0.477;
2.0220075378993063,0.486;
2.0665707898772423,0.497;
2.104917182290514,0.506
]
CM3_50 = [0.018594502216356015,0.8;
0.04742086350146105,2.3;
0.10519603878813771,4.7;
0.17624646184129214,7.9;
0.2480819555813261,11.1;
0.32211625760084217,14.4;
0.3795935027580471,17.0;
0.4258691854033312,19.1;
0.49555965850569533,22.3;
0.5267873900405123,23.6;
0.5768175263788327,25.9;
0.6274225419810636,28.2;
0.7016300325777629,31.5;
0.7453357340677953,33.5;
0.7944736059082481,35.7;
0.8348368441531687,37.5;
0.876826300249483,39.4;
0.9125473979751432,41.1;
0.9414798086533251,42.4;
1.0113205819746545,45.4;
1.0978744344668159,49.3;
1.1446521351023486,51.4

]
CM4_50 = [0.025617794935569264,0.8;
0.1193440959479977,5.1;
0.13891516811499113,6.0;
0.20975616269045028,9.2;
0.26413317972701816,11.7;
0.33570698323809234,15.0;
0.3879485164529147,17.4;
0.45834051773466294,20.6;
0.5092785589489666,22.9;
0.5663129143746518,25.5;
0.6612324617955153,29.8;
0.5982215745664563,26.9;
0.7251928344179869,32.8;
0.718938972007538,32.4;
0.753453090309832,34.0;
0.8029365763593777,36.3;
0.8307268579624781,37.6;
0.9023609341501933,40.8;
0.9419333796186797,42.6;
0.9678899222558767,43.8;
1.0345000038147263,46.8;
1.112241075447658,50.4
]

CM3_500 = [1000* CM3_500(:,2),CM3_500(:,1)]
CM4_500 = [1000* CM4_500(:,2),CM4_500(:,1)]
CM3_50 = [ CM3_50(:,2),CM3_50(:,1)]
CM4_50 = [CM4_50(:,2),CM4_50(:,1)]


figure
subplot(2,1,1);
%Messung , VM1, VM2

hold on
title('Current Measurement 3 (CM3)')
plot(CM3_500(:,2),CM3_500(:,1))

p = polyfit(CM3_500(:,2), CM3_500(:,1),1)
poly = p(1)*CM3_500(:,2) + p(2)

plot(CM3_500(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
 xlabel('measured current [mA]');
 ylabel('actual current [mA]');
 legend({'PrecisionSupply 1','PrecisionSupply 2'},'Location','southeast');


subplot(2,1,2);
title('Current Measurement 4 (CM4)')
hold on
plot(CM4_500(:,2),CM4_500(:,1))

p = polyfit(CM4_500(:,2), CM4_500(:,1),1)
poly = p(1)*CM4_500(:,2) + p(2)

plot(CM4_500(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
legend('500uA',  s)





figure
subplot(2,1,1);
%Messung , VM1, VM2

hold on
plot(CM3_50(:,2),CM3_50(:,1))

p = polyfit(CM3_50(:,2), CM3_50(:,1),1)
poly = p(1)*CM3_50(:,2) + p(2)

plot(CM3_50(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
legend('50mA',  s)


subplot(2,1,2);
title('CM4')
hold on
plot(CM4_50(:,2),CM4_50(:,1))

p = polyfit(CM4_50(:,2), CM4_50(:,1),1)
poly = p(1)*CM4_50(:,2) + p(2)

plot(CM4_50(:,2), poly, 'r')
s = strcat(num2str(p(1)), ' * x ' ,num2str(p(2)))
legend('50mA',  s)